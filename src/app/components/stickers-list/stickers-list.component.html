<div class="container" (window:scroll)="onScroll()">
    <mat-form-field class="filter">
        <mat-icon matPrefix>search</mat-icon>
        <input matInput type="text" [(ngModel)]="searchTerm" (input)="filterStickers()" placeholder="Pesquisar stickers...">
    </mat-form-field>
    @if(isLoading) {
        <mat-progress-bar mode="indeterminate"></mat-progress-bar>
    } 
    @else {
        @for(sticker of stickers; track sticker.name) {
            <mat-card class="sticker-card" appearance="outlined" (click)="goToDetails(sticker)" @fadeInDownBig>
                <mat-card-header>
                    <mat-card-title>{{sticker.name}}</mat-card-title>
                    <mat-divider></mat-divider>
                </mat-card-header>
                <img src="{{sticker.image}}">
                <mat-card-content>
                    <p class="name">{{sticker.effect}}</p>
                    @if(sticker.tournament_event) {
                        <p>{{sticker.tournament_event}}</p>
                    }
                    @else if (sticker.crates.length > 0) {
                        @for(crate of sticker.crates; track crate.name) {
                            <p>{{crate.name}}</p>
                        }
                    }
                </mat-card-content>
                @if(getPrice(sticker) != null) {
                    <p class="price-text money anim-color-change">$ {{getPrice(sticker)}} <img class="icon" src="steam_icon.png" alt="Icone steam"></p>
                }
                @else {
                    <p class="price-text money anim-color-change">Price not available</p>
                }
                <div class="test" [style.background-color]="sticker.rarity.color">
                    <p>{{sticker.rarity.name}}</p>
                </div>
            </mat-card>
        }
    }
</div>